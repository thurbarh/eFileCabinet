@model DocumentServer.Models.ViewModels.FilesListViewModel;
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">
    <title>CORK Admin Template - Forms File Upload</title>
    <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="https://fonts.googleapis.com/css?family=Quicksand:400,500,600,700&display=swap" rel="stylesheet">
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/plugins.css" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL STYLES -->
    
    <link rel="stylesheet" type="text/css" href="plugins/table/datatable/dt-global_style-dark.css">
    <link href="assets/css/scrollspyNav.css" rel="stylesheet" type="text/css" />
    <link href="plugins/file-upload/file-upload-with-preview.min.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL STYLES -->

</head>
<body class="sidebar-noneoverflow" data-spy="scroll" data-target="#navSection" data-offset="100">


    <!--  BEGIN MAIN CONTAINER  -->
    <div class="main-container" id="container">

        <div class="overlay"></div>
        <div class="search-overlay"></div>


        <!--  BEGIN CONTENT AREA  -->
        <div id="content" class="main-content">
            <div class="container" style="position:center">
                <div class="container">

                    @if (ViewBag.Message != null)
                    {
                        <div class="alert alert-success alert-dismissible" style="margin-top:20px">
                            @ViewBag.Message
                        </div>
                    }
                    <h4>Upload File</h4>

                    <div class="custom-file-container" data-upload-id="mySecondImage">



                        <form method="post" enctype="multipart/form-data">

                            <div class="custom-file-container" data-upload-id="mySecondImage">
                                <label><a href="javascript:void(0)" class="custom-file-container__image-clear" title="Clear Image"></a></label>
                                <label class="custom-file-container__custom-file">
                                    <input type="file" name="files" class="upload-file" multiple required>

                                </label>
                                <div class="">
                                    <div class="row">
                                        <input type="text" class="custom-description-container-control" autocomplete="off" placeholder="Enter File Description" name="description" />

                                        <button class="btn uploadbtn" type="submit" asp-controller="File" asp-action="Upload">Upload</button>
                                    </div>

                                </div>
                                <div hidden class="custom-file-container__image-preview"></div>
                            </div>


                        </form>


                    </div>




                </div>

            </div>
            <div class="layout-px-spacing">

                <div class="row layout-top-spacing" id="cancel-row">

                    <div class="  layout-spacing">
                        <div class="widget-content widget-content-area br-6" style="font-size: large;">
                            @if (Model.Files.Count == 0)
                            {
                                <h5 class="empty-files-table">No File(s) Uploaded</h5>
                            }
                            else
                            {
                                <div class="table-responsive ">

                                    <table id="zero-config" class="table" style="width:100%">
                                        <thead>
                                            <tr>

                                                <th>Name</th>
                                                <th>Description</th>
                                                <th>Size(bytes)</th>
                                                <th>Date Added</th>
                                                <th>Action</th>
                                                <th>Delete</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            @foreach (var file in Model.Files)
                                            {

                                                <tr>

                                                    <td>@file.Name</td>

                                                    <td>@file.Description</td>
                                                    <td>@file.Size_in_Bytes</td>
                                                    <td>@file.DateAdded</td>
                                                    <td>
                                                        <a type="button" class="btn btn-primary btn-sm" asp-controller="File" asp-action="DownloadFile" asp-route-id="@file.Id">Download</a>
                                                    </td>
                                                    <td>
                                                        <a type="button" class="btn btn-danger btn-sm" asp-controller="File" asp-action="DeleteFile" asp-route-id="@file.Id">Delete</a>
                                                    </td>
                                                </tr>

                                            }
                                        </tbody>

                                    </table>

                                </div>
                            }
                        </div>
                    </div>

                </div>

            </div>


            <!--  END CONTENT AREA  -->

        </div>
        <!-- END MAIN CONTAINER -->
        <!-- BEGIN GLOBAL MANDATORY SCRIPTS -->
        <script src="assets/js/libs/jquery-3.1.1.min.js"></script>
        <script src="bootstrap/js/popper.min.js"></script>
        <script src="bootstrap/js/bootstrap.min.js"></script>
        <script src="plugins/perfect-scrollbar/perfect-scrollbar.min.js"></script>
        <script src="plugins/blockui/jquery.blockUI.min.js"></script>
        <script src="assets/js/app.js"></script>

        <script>
            $(document).ready(function () {
                App.init();
            });
        </script>
        <script src="plugins/highlight/highlight.pack.js"></script>
        <script src="assets/js/custom.js"></script>
        <!-- END GLOBAL MANDATORY SCRIPTS -->
        <!-- BEGIN PAGE LEVEL PLUGINS -->

        <script src="plugins/file-upload/file-upload-with-preview.min.js"></script>

        <script>
            //First upload

            //Second upload
            var secondUpload = new FileUploadWithPreview('mySecondImage')
        </script>
        <!-- END PAGE LEVEL PLUGINS -->
        </div>
</body>
</html>